# refactoring

Рефакторинг на максималках. Опорный конспект

8. Абстракция
Намерение и реализация

Фрактальная архитектура (max 7 элементов на уровне)

Разделение ответственности
принцип разделения ответственности (Separation of Concerns, SoC)

Декомпозиция задач

Принцип единственной ответственности
Код, который меняется по разным причинам, лучше держать отдельно, а который меняется по одинаковой причине — вместе.

Инкапсуляция
Гарантии валидности данных — внутренняя задача конкретного модуля

9. Функциональный пайплайн

Преобразования данных (разбиение на этапы - последовательность функций)

Состояния данных
Валидация данных
Дополнительно: Скотт Влашин в “Domain Modeling Made Functional”
Селекторы и маппинг данных

10. Условия и сложность кода
Your Code as a Crime Scene” Адам Торнхилл 
цикломатическая сложность - lint complexity
Ранний возврат
Законы де Моргана
!(A && B) === !A || !B;
!(A || B) === !A && !B;
Предикаты isTrue
lint switch-exhaustiveness-check (switch по всем Enum)
Null-объект (пустой метод в вариациях +/- антипаттерн)


11. Сайд-эффекты
Сохранение данных на сервере, вывод на экран, доступ к браузерному API 
Чистые функции - Ссылочная прозрачность
Неизменяемость по умолчанию
Функциональное ядро в императивной оболочке (принцип бутерброда)
Команды и запросы - Command-Query Separation, CQS
Command-Query Responsibility Segregation, CQRS -отличия в структурах данных для чтения и записи

12. Обработка ошибок

Виды ошибок
- Доменные
- Инфраструктурные
- Паники

Техники обработки
- С помощью выбрасывания через throw;
- Использования Result-контейнеров;
- Сочетания выбрасывания и контейнеров;
- Сочетания контейнеров и функционального связывания.
Дополнительно: Скотт Влашин в посте о “Railway Oriented Programming”

Fail Fast
Rethrow
Обработчики последней надежды: Error Boundaries, события
Предвалидация данных

13. Интеграция модулей
Зацепление (coupling) и связность
Объектная композиция
принцип разделения интерфейса (Interface Segregation Principle, ISP)
Функциональная композиция
Отказ от зависимостей
Предвалидация на входе в контекст

14. Обобщения и иерархии
Обобщённые алгоритмы
Наследование и композиция

15. Архитектура
Моделирование бизнес-процессов
Доменная модель
Связь с внешним миром
Порты и адаптеры
UI-логика
Model-View-ViewModel (MVVM)

16. Декларативность
Читаемость
Надёжность
Расширяемость
Автоматное программирование (переключение между состояниями)

17. Статическая типизация
Моделирование домена
Нарушения договорённостей
Дизайн API - техника "вычеркивания"
